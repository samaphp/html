<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dummy Web Placeholder Page Service</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src * data: https:; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
  <style>
    body {
      margin: 0;
      font-family: "Tahoma", "Arial", sans-serif;
      background-color: #f7f9fb;
      color: #333;
      text-align: left;
    }

    header {
      background: #1a73e8;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }

    .back-link a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    .back-link a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 900px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    /* === Flex layout for content + image === */
    .course-info {
      display: flex;
      align-items: flex-start;
      gap: 1.5rem;
      flex-wrap: nowrap;
    }

    .course-text {
      flex: 1 1 60%;
      min-width: 250px;
    }

    .course-text h2 {
      margin-top: 0;
      color: #1a73e8;
    }

    .course-info img {
      flex: 0 0 40%;
      max-width: 40%;
      height: auto;
      border-radius: 6px;
      display: none; /* hidden by default */
      object-fit: cover;
    }

    /* Mobile responsiveness */
    @media (max-width: 700px) {
      .course-info {
        flex-direction: column;
      }
      .course-info img {
        max-width: 100%;
      }
    }

    .usage {
      background: #f0f4ff;
      border: 1px solid #cbd6f0;
      padding: 1.5rem;
      border-radius: 6px;
      margin-top: 1.5rem;
      line-height: 1.6;
    }

    .usage h3 {
      margin-top: 0;
      color: #1a73e8;
    }

    .usage code {
      background: #eef2f7;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
    }

    .footer {
      background: #f0f0f0;
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #555;
    }
  </style>
  <script>
    window.onload = function() {
      const params = new URLSearchParams(window.location.search);
      const lang = params.get('lang') || 'en';

      // Translations
      const translations = {
        en: {
          serviceName: 'Dummy Web Placeholder Page Service',
          tutorialTitle: 'How to Use This Service',
          purpose: 'Purpose: This service provides a simple placeholder web page that can be customized using URL parameters.',
          useCases: [
            '✔ Use as a temporary landing page for auto-generated links.',
            '✔ Display quick information without building a full webpage.',
            '✔ Test integrations or demos where a simple page is required.'
          ],
          exampleHeading: 'Step-by-step Example:',
          exampleUrl: '?title=Hello%20world!&text=This%20is%20a%20sample%20paragraph.&img=https://picsum.photos/seed/101001001/400/250',
          exampleLink: 'Click here to load the Hello world! example with image.',
          note: 'Note: The text is limited to 500 characters.',
          back: 'Back',
          footer: '⚠️ This page is for testing purposes. Temporary page. Content is rendered directly from URL parameters.'
        },
        ar: {
          serviceName: 'خدمة الصفحة التجريبية',
          tutorialTitle: 'كيفية استخدام هذه الخدمة',
          purpose: 'الغرض: هذه الخدمة توفر صفحة ويب بسيطة يمكن تخصيصها باستخدام معاملات الرابط (URL).',
          useCases: [
            '✔ استخدامها كصفحة هبوط مؤقتة للروابط المولدة تلقائياً.',
            '✔ عرض معلومات سريعة بدون الحاجة لبناء صفحة كاملة.',
            '✔ اختبار التكاملات أو العروض التجريبية التي تتطلب صفحة بسيطة.'
          ],
          exampleHeading: 'مثال عملي خطوة بخطوة:',
          exampleUrl: '?lang=ar&title=مرحباً%20بالعالم!&text=هذا%20نص%20تجريبي%20للتوضيح.&img=https://picsum.photos/seed/101001001/400/250',
          exampleLink: 'اضغط هنا لفتح مثال مرحباً بالعالم مع صورة!',
          note: 'ملاحظة: النص محدود بـ ٥٠٠ حرف فقط.',
          back: 'رجوع',
          footer: '⚠️ هذه الصفحة لأغراض التجربة. وهي صفحة مؤقتة. محتوى الصفحة يتم التحكم به مباشرة من الرابط.'
        }
      };

      const t = translations[lang] || translations.en;

      // Set document direction
      document.documentElement.lang = lang;
      document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
      document.body.style.textAlign = (lang === 'ar') ? 'right' : 'left';

      // Values
      const rawTitle = params.get('title');
      let rawText = params.get('text');
      const rawImg = params.get('img');

      // Enforce text length limit
      if (rawText && rawText.length > 500) {
        rawText = rawText.substring(0, 500) + '...';
      }

      if (!rawTitle) {
        // Tutorial mode
        document.querySelector('.back-link').style.display = 'none';
        document.querySelector('header h1').textContent = t.serviceName;

        document.getElementById('main-title').textContent = t.tutorialTitle;
        document.getElementById('page-text').innerHTML = `
          <div class="usage">
            <p>${t.purpose}</p>
            <ul>
              ${t.useCases.map(c => `<li>${c}</li>`).join('')}
            </ul>
            <h3>${t.exampleHeading}</h3>
            <p><code>${t.exampleUrl}</code></p>
            <p><a href="${t.exampleUrl}">${t.exampleLink}</a></p>
            <p><em>${t.note}</em></p>
          </div>
        `;
      } else {
        // Normal mode
        document.querySelector('header h1').textContent = t.serviceName;
        document.querySelector('header h1').style.display = 'none';
        document.getElementById('main-title').textContent = rawTitle;
        document.getElementById('page-text').textContent = rawText || t.defaultText || '';

        // Image handling
        if (rawImg) {
          const imgEl = document.getElementById('page-image');
          imgEl.src = rawImg;
          imgEl.style.display = 'block';
        }
      }

      // Document title, back, footer
      document.title = t.serviceName;
      document.getElementById('back-link').textContent = t.back;
      document.getElementById('footer-text').textContent = t.footer;
    };

    function goBack() {
      window.history.back();
    }
  </script>
</head>
<body>
  <header>
    <h1></h1>
    <div class="back-link">
      <a id="back-link" href="javascript:void(0);" onclick="goBack()">Back</a>
    </div>
  </header>

  <div class="container">
    <div class="course-info">
      <div class="course-text">
        <h2 id="main-title">Default Title</h2>
        <p id="page-text">This is a sample text shown when the text parameter is not provided.</p>
      </div>
      <img id="page-image" alt="Page Image">
    </div>
  </div>

  <div class="footer" id="footer-text">
    © This page is for testing purposes. Temporary page.
  </div>
</body>
</html>
